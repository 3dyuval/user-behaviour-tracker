/**
 * @author Taha Al-Jody <taha@ta3design.com>
 * https://github.com/TA3/web-user-behaviour
 */
var userBehaviour=function(){var e={userInfo:!0,clicks:!0,mouseMovement:!0,mouseMovementInterval:1,mouseScroll:!0,mousePageChange:!0,timeCount:!0,clearAfterProcess:!0,processTime:15,processData:function(e){console.log(e)}},o={},n={processInterval:null,mouseInterval:null,mousePosition:[],eventListeners:{scroll:null,click:null,mouseMovement:null},eventsFunctions:{scroll:()=>{s.mouseScroll.push([window.scrollX,window.scrollY,i()])},click:e=>{s.clicks.clickCount++;var o=[],n="";e.path.forEach((s,t)=>{t!==e.path.length-1&&t!==e.path.length-2&&(n=s.localName,""!==s.className&&s.classList.forEach(e=>{n+="."+e}),""!==s.id&&(n+="#"+s.id),o.push(n))}),o=o.reverse().join(">"),s.clicks.clickDetails.push([e.clientX,e.clientY,o,i()])},mouseMovement:e=>{n.mousePosition=[e.clientX,e.clientY,i()]}}},s={};function t(){s={userInfo:{appCodeName:navigator.appCodeName||"",appName:navigator.appName||"",vendor:navigator.vendor||"",platform:navigator.platform||"",userAgent:navigator.userAgent||""},time:{startTime:0,currentTime:0},clicks:{clickCount:0,clickDetails:[]},mouseMovements:[],mouseScroll:[],contextChange:[]}}function i(){return Date.now()}function r(){return!1===o.userInfo&&void 0!==userBehaviour.showResult().userInfo&&delete userBehaviour.showResult().userInfo,void 0!==o.time.timeCount&&o.time.timeCount&&(s.time.currentTime=i()),s}return t(),{showConfig:function(){return Object.keys(o).length!==Object.keys(e).length?e:o},config:function(n){o={},Object.keys(e).forEach(s=>{o[s]=s in n?n[s]:e[s]})},start:function(){Object.keys(o).length!==Object.keys(e).length&&(console.log("no config provided. using default.."),o=e),void 0!==o.timeCount&&o.timeCount&&(s.time.startTime=i()),o.mouseMovement&&(n.eventListeners.mouseMovement=window.addEventListener("mousemove",n.eventsFunctions.mouseMovement),n.mouseInterval=setInterval(()=>{n.mousePosition&&n.mousePosition.length&&(!s.mouseMovements.length||n.mousePosition[0]!==s.mouseMovements[s.mouseMovements.length-1][0]&&n.mousePosition[1]!==s.mouseMovements[s.mouseMovements.length-1][1])&&s.mouseMovements.push(n.mousePosition)},1e3*e.mouseMovementInterval)),o.clicks&&(n.eventListeners.click=window.addEventListener("click",n.eventsFunctions.click)),o.mouseScroll&&(n.eventListeners.scroll=window.addEventListener("scroll",n.eventsFunctions.scroll)),!1!==o.processTime&&(n.processInterval=setInterval(()=>{o.processData(r())},1e3*o.processTime))},stop:function(){!1!==o.processTime&&clearInterval(n.processInterval),clearInterval(n.mouseInterval),window.removeEventListener("scroll",n.eventsFunctions.scroll),window.removeEventListener("click",n.eventsFunctions.click),window.removeEventListener("mousemove",n.eventsFunctions.mouseMovement)},showResult:r,processResults:function(){o.processData(r()),o.clearAfterProcess&&t()}}}();